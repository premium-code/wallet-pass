<script>
    async function loadTicket() {
        // 1. Get the ID from the URL (e.g., ?id=1001)
        const params = new URLSearchParams(window.location.search);
        const ticketId = params.get('id');

        // If no ID is provided, we can't load the ticket
        if (!ticketId) {
            console.log("No Ticket ID found in URL. Using defaults.");
            // You might want to display a generic error message here
            return;
        }

        try {
            // 2. Fetch the "database" file (Must be in the same folder)
            const response = await fetch('tickets.json');
            const data = await response.json();

            // 3. Find the specific ticket using the ID from the URL
            const ticket = data[ticketId];

            if (ticket) {
                // 4. Update the HTML elements with the data found
                document.getElementById('event-name').textContent = ticket.event;
                document.getElementById('event-details').textContent = ticket.date;
                document.getElementById('sec-val').textContent = ticket.sec;
                document.getElementById('row-val').textContent = ticket.row;
                document.getElementById('seat-val').textContent = ticket.seat;
                document.getElementById('location-sub').textContent = ticket.loc;
                document.getElementById('admission-type').textContent = ticket.type;
            } else {
                // Handle case where ID is in URL but not in the JSON file
                document.getElementById('event-name').textContent = "ERROR: TICKET NOT FOUND";
            }

        } catch (error) {
            console.error("Error loading ticket database:", error);
            document.getElementById('event-name').textContent = "ERROR: DATABASE ISSUE";
        }
    }

    // Run the function when the page loads
    loadTicket();
</script>
